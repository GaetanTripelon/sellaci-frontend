<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="config.js"></script>
    <title>Créer un compte</title>
    <link rel="stylesheet" href="signup.css">
    <link href='https://fonts.googleapis.com/css?family=Barlow+Condensed' rel='stylesheet'>
</head>

<body>
    <p id="create">Créer un compte</p>
    <p id="email">Email:</p><input type='text' name='email' id="email_box">
    <p id="password">Password:</p><input type='password' name='password' id="password_box"><br>
    <input type="submit" value="Je m'inscris" id='trial' onclick="signup()"/>
    <div id='error_signup_message'></div>
    <form action="login.html">
        <input type="submit" value="J'ai déjà un compte" id="account_already_on">
    </form>
</body>

<script>

    function signup(){
        data = {
            "email": document.getElementById("email_box").value,
            "password": document.getElementById("password_box").value,
        }

        console.log(data)

        postData(URL_API + "signup", data)
            .then((login_success) => {
                if(login_success['success']){
                    console.log('LOGIN SUCCESS')
                    window.location = "play.html";
                }else{
                    console.log('LOGIN FAIL')
                }
            }
        );
    }

    // Example POST method implementation:
    async function postData(url = '', data = {}) {
        const response = await fetch(url, {
            method: 'POST', 
            mode: 'cors', 
            cache: 'no-cache', 
            credentials: 'same-origin', 
            headers: {
            'Content-Type': 'application/json'
            },
            redirect: 'follow', 
            referrerPolicy: 'no-referrer',
            body: JSON.stringify(data) 
        });
        return response.json();
    }
    
</script> 

</html>
